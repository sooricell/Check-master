<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">

  <!-- Ù…Ù‡Ù…: Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø²ÙˆÙ… Ùˆ Ø«Ø§Ø¨Øª Ù…Ø§Ù†Ø¯Ù† Ù…Ù‚ÛŒØ§Ø³ Ø±ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ -->
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover"
  />

  <title>Check Master</title>

  <!-- PWA / iOS -->
  <meta name="theme-color" content="#050608">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Check Master">

   <!-- Ø¢ÛŒÚ©Ù†â€ŒÙ‡Ø§ -->
  <!-- favicon Ø§ØµÙ„ÛŒ Ø§Ø² Ø±ÙˆÛŒ SVG -->
  <link rel="apple-touch-icon" href="icon.svg">
  <link rel="icon" type="image/svg+xml" href="icon.svg">

  <!-- Manifest (Ø¨Ø±Ø§ÛŒ PWA) -->
  <link rel="manifest" href="manifest.json">

  <style>
    :root {
      --bg: #050608;
      --bg-soft: #0b0c10;
      --card: #0f1015;
      --border: #2f323a;
      --text: #f9fafb;
      --muted: #9ca3af;
      --accent: #e5c07b;
      --danger: #ef4444;
      --success: #22c55e;
      --tab-h: 60px;
    }

    * { box-sizing: border-box; }

    html, body {
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text);
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", system-ui, sans-serif;
      -webkit-font-smoothing: antialiased;
      -webkit-text-size-adjust: 100%;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
      overflow-x: hidden;
    }

    body {
      padding-bottom: calc(var(--tab-h) + env(safe-area-inset-bottom));
      font-size: 15px;
    }

    header {
      position: sticky;
      top: 0;
      z-index: 10;
      background: rgba(7,8,12,0.96);
      border-bottom: 1px solid rgba(75,85,99,0.7);
      padding: 10px 14px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .brand-icon {
      width: 26px;
      height: 26px;
      border-radius: 8px;
      border: 1px solid var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 15px;
      background: #111318;
    }

    .brand-title {
      font-weight: 700;
      font-size: 16px;
    }

    main {
      max-width: 960px;
      margin: 0 auto;
      padding: 12px;
    }

    h2 {
      font-size: 17px;
      margin: 0 0 4px;
    }

    h3 {
      font-size: 15px;
      margin: 0 0 6px;
    }

    .subtitle {
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 6px;
    }

    .card {
      background: var(--card);
      border-radius: 14px;
      border: 1px solid var(--border);
      padding: 10px;
      margin-bottom: 10px;
    }

    label {
      display: block;
      font-size: 12px;
      color: var(--muted);
      margin: 4px 2px;
    }

    input, select, textarea, button {
      font-family: inherit;
      font-size: 16px;  /* Ù…Ù‡Ù…: Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø²ÙˆÙ… Ø±ÙˆÛŒ iOS */
    }

    input, select, textarea {
      width: 100%;
      border-radius: 10px;
      border: 1px solid rgba(75,85,99,0.9);
      background: #050608;
      color: var(--text);
      padding: 7px 9px;
    }

    input::placeholder, textarea::placeholder {
      color: #6b7280;
    }

    input:focus, select:focus, textarea:focus {
      outline: 2px solid var(--accent);
      outline-offset: 0;
      border-color: var(--accent);
    }

    textarea {
      min-height: 60px;
      resize: vertical;
    }

    button {
      cursor: pointer;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      background: #050608;
      color: var(--text);
      padding: 7px 14px;
      font-weight: 500;
    }

    button.primary {
      background: var(--accent);
      border-color: var(--accent);
      color: #111827;
    }

    button.small {
      padding: 4px 9px;
      font-size: 12px;
    }

    button.danger {
      border-color: rgba(248,113,113,0.7);
      color: #fecaca;
    }

    button:active {
      transform: scale(0.97);
    }

    .row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .row > div {
      flex: 1;
      min-width: 150px;
    }

    .tiny {
      font-size: 11px;
      color: var(--muted);
    }

    .sep {
      height: 1px;
      background: rgba(55,65,81,0.9);
      margin: 8px 0;
    }

    .hidden { display: none; }

    /* Tabs */
    .tabs {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      height: calc(var(--tab-h) + env(safe-area-inset-bottom));
      padding-bottom: env(safe-area-inset-bottom);
      background: rgba(7,8,12,0.97);
      border-top: 1px solid rgba(55,65,81,0.9);
      display: flex;
      z-index: 20;
    }

    .tab {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 2px;
      font-size: 11px;
      color: var(--muted);
      cursor: pointer;
    }

    .tab-icon {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid transparent;
      font-size: 14px;
    }

    .tab.active {
      color: var(--accent);
      font-weight: 600;
    }

    .tab.active .tab-icon {
      border-color: var(--accent);
    }

    /* KPI */
    .kpi-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px,1fr));
      gap: 8px;
    }

    .kpi-card {
      border-radius: 12px;
      border: 1px solid rgba(75,85,99,0.9);
      padding: 7px 9px;
      cursor: pointer;
      background: #050608;
    }

    .kpi-title {
      font-size: 11px;
      color: var(--muted);
      margin-bottom: 3px;
    }

    .kpi-value {
      font-size: 15px;
      font-weight: 700;
    }

    .kpi-sub {
      font-size: 11px;
      color: var(--muted);
      margin-top: 2px;
    }

    /* Manage */
    .folder {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 9px;
      border-radius: 12px;
      border: 1px solid rgba(75,85,99,0.9);
      background: #050608;
      margin-bottom: 6px;
      cursor: pointer;
    }

    .folder-main {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .folder-name {
      font-size: 13px;
      font-weight: 600;
    }

    .folder-meta {
      font-size: 11px;
      color: var(--muted);
    }

    .folder-badge {
      font-size: 11px;
      padding: 3px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.9);
      color: var(--muted);
    }

    .folder-archive {
      border-color: rgba(129,140,248,0.9);
    }

    .check-card {
      border-radius: 11px;
      border: 1px solid rgba(75,85,99,0.9);
      padding: 6px 7px;
      margin-bottom: 5px;
      font-size: 12px;
      background: #050608;
    }

    .check-top {
      display: flex;
      justify-content: space-between;
      gap: 4px;
    }

    .status-pill {
      font-size: 10px;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 60px;
    }

    .st-unpaid { color: #fbbf24; border-color: #fbbf24; }
    .st-near   { color: #fb923c; border-color: #fb923c; }
    .st-overdue{ color: #f97373; border-color: #f97373; }
    .st-paid   { color: #4ade80; border-color: #4ade80; }
    .st-extended { color:#a855f7; border-color:#a855f7; }

    .check-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-top: 4px;
    }

    /* Overlays */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(15,23,42,0.85);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 50;
    }

    .overlay-card {
      width: min(520px, 100% - 24px);
      max-height: calc(100vh - 40px);
      overflow: auto;
      background: #050608;
      border-radius: 14px;
      border: 1px solid rgba(75,85,99,0.9);
      padding: 10px;
    }

    .overlay-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 6px;
    }

    .overlay-body {
      font-size: 12px;
    }

    .search-wrap {
      position: relative;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .search-input {
      width: 100%;
      border-radius: 999px;
      padding-right: 28px;
    }

    .search-icon {
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 13px;
      color: var(--muted);
      pointer-events: none;
    }

    .search-clear {
      border-radius: 999px;
      border: 1px solid rgba(75,85,99,0.9);
      background: transparent;
      color: var(--muted);
      padding: 4px 8px;
      font-size: 11px;
      white-space: nowrap;
    }

    @media (prefers-color-scheme: light) {
      :root {
        --bg: #f3f4f6;
        --bg-soft: #f9fafb;
        --card: #ffffff;
        --border: #d1d5db;
        --text: #111827;
        --muted: #6b7280;
        --accent: #d4a15d;
      }
      header { background: #f9fafb; }
      .tabs { background: #f9fafb; }
      .card, .folder, .check-card, .kpi-card { background: #ffffff; }
      input, select, textarea {
        background: #f9fafb;
        color: #111827;
      }
      button {
        background: #f9fafb;
        color: #111827;
      }
      button.primary {
        background: var(--accent);
        color: #111827;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="brand-icon">âœ“</div>
      <div class="brand-title">Check Master</div>
    </div>
  </header>

  <main>
    <!-- Ú¯Ø²Ø§Ø±Ø´ -->
    <section id="view-report">
      <h2>Ú¯Ø²Ø§Ø±Ø´ Ø³ÙˆØ¯ Ùˆ ÙˆØ¶Ø¹ÛŒØª Ú†Ú©â€ŒÙ‡Ø§</h2>
      <div class="subtitle">Ø³ÙˆØ¯ Ø±ÙˆØ²Ø§Ù†Ù‡ØŒ Ù…Ø§Ù‡Ø§Ù†Ù‡ØŒ Ø¢ÛŒÙ†Ø¯Ù‡ Ùˆ ÙˆØ¶Ø¹ÛŒØª Ú©Ù„ÛŒ Ú†Ú©â€ŒÙ‡Ø§.</div>

      <div class="card">
        <div class="kpi-grid">
          <div class="kpi-card" onclick="openDetail('today')">
            <div class="kpi-title">Ø³ÙˆØ¯ Ø§Ù…Ø±ÙˆØ²</div>
            <div class="kpi-value" id="kpiToday">0</div>
            <div class="kpi-sub">ØªÙˆÙ…Ø§Ù†</div>
          </div>
          <div class="kpi-card" onclick="openDetail('month')">
            <div class="kpi-title">Ø³ÙˆØ¯ Ù…Ø§Ù‡ Ø¬Ø§Ø±ÛŒ</div>
            <div class="kpi-value" id="kpiMonth">0</div>
            <div class="kpi-sub">ØªÙˆÙ…Ø§Ù†</div>
          </div>
          <div class="kpi-card" onclick="openDetail('next30')">
            <div class="kpi-title">
              Ø³ÙˆØ¯
              <span id="kpiNextDays"
                    style="text-decoration: underline; cursor: pointer;"
                    onclick="event.stopPropagation(); changeFutureDays();">
                Û³Û°
              </span>
              Ø±ÙˆØ² Ø¢ÛŒÙ†Ø¯Ù‡
            </div>
            <div class="kpi-value" id="kpiNext30">0</div>
            <div class="kpi-sub">ØªÙˆÙ…Ø§Ù†</div>
          </div>
        </div>

        <div class="sep"></div>

        <div class="kpi-grid">
          <div class="kpi-card" onclick="openDetail('active')">
            <div class="kpi-title">Ú†Ú©â€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„</div>
            <div class="kpi-value" id="kpiActive">0</div>
          </div>
          <div class="kpi-card" onclick="openDetail('near')">
            <div class="kpi-title">Ù†Ø²Ø¯ÛŒÚ© Ø³Ø±Ø±Ø³ÛŒØ¯ (Û±Û° Ø±ÙˆØ²)</div>
            <div class="kpi-value" id="kpiNear">0</div>
          </div>
          <div class="kpi-card" onclick="openDetail('overdue')">
            <div class="kpi-title">Ú†Ú©â€ŒÙ‡Ø§ÛŒ Ù…Ø¹ÙˆÙ‚</div>
            <div class="kpi-value" id="kpiOverdue">0</div>
          </div>
          <div class="kpi-card" onclick="openDetail('paid')">
            <div class="kpi-title">Ú†Ú©â€ŒÙ‡Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øªâ€ŒØ´Ø¯Ù‡</div>
            <div class="kpi-value" id="kpiPaid">0</div>
          </div>
        </div>

        <div class="sep"></div>

        <div class="kpi-title">Ø³ÙˆØ¯ Ú©Ù„ (Ø¨Ø¯ÙˆÙ† ØªÙ…Ø¯ÛŒØ¯)</div>
        <div class="kpi-value" id="kpiTotalProfitBase">0</div>

        <div class="kpi-title" style="margin-top:4px;">Ø³ÙˆØ¯ ØªÙ…Ø¯ÛŒØ¯Ù‡Ø§</div>
        <div class="kpi-value" id="kpiExtendedProfit">0</div>

        <div class="kpi-title" style="margin-top:4px;">Ø³ÙˆØ¯ Ú©Ù„ + ØªÙ…Ø¯ÛŒØ¯</div>
        <div class="kpi-value" id="kpiTotalProfit">0</div>
      </div>
    </section>

    <!-- Ø§ÙØ²ÙˆØ¯Ù† Ú†Ú© -->
    <section id="view-add" class="hidden">
      <h2>Ø§ÙØ²ÙˆØ¯Ù† Ú†Ú©</h2>
      <div class="subtitle">Ú†Ú© ÛŒÚ©â€ŒØ¨Ø§Ø±Ù‡ ÛŒØ§ Ø³Ø±ÛŒ Ú†Ú©â€ŒÙ‡Ø§ÛŒ Ù…Ø§Ù‡Ø§Ù†Ù‡ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø³ÙˆØ¯ Ù…Ø§Ù‡Ø§Ù†Ù‡.</div>

      <div class="card">
        <div class="row">
          <div>
            <label>Ù†ÙˆØ¹ Ú†Ú©</label>
            <select id="checkType">
              <option value="single">Ú†Ú© ÛŒÚ©â€ŒØ¨Ø§Ø±Ù‡</option>
              <option value="monthly">Ú†Ú©â€ŒÙ‡Ø§ÛŒ Ù…Ø§Ù‡Ø§Ù†Ù‡</option>
            </select>
          </div>
          <div>
            <label>Ù…Ø¹Ø±Ù</label>
            <select id="refSelect"></select>
          </div>
        </div>

        <div class="row">
          <div>
            <label>Ù†Ø§Ù… Ø®Ø±ÛŒØ¯Ø§Ø±</label>
            <input id="buyerName" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø¢Ù‚Ø§ÛŒ Ø­Ø³ÛŒÙ†ÛŒ">
          </div>
          <div>
            <label>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ† Ø®Ø±ÛŒØ¯Ø§Ø± (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label>
            <input id="buyerPhone" class="phone-input" placeholder="Ù…Ø«Ù„Ø§Ù‹: 0912..." inputmode="tel">
          </div>
        </div>

        <div class="row">
          <div>
            <label>Ù…Ø¨Ù„Øº Ú©Ù„ Ø§ØµÙ„ (ØªÙˆÙ…Ø§Ù†)</label>
            <input id="principal" class="money-input" data-money="1" placeholder="100,000,000">
          </div>
          <div>
            <label>Ø¯Ø±ØµØ¯ Ø³ÙˆØ¯ Ù…Ø§Ù‡Ø§Ù†Ù‡ (%)</label>
            <input id="rate" class="numeric-dec" placeholder="Ù…Ø«Ù„Ø§Ù‹: 10" inputmode="decimal">
          </div>
        </div>

        <div class="row">
          <div>
            <label>ØªØ§Ø±ÛŒØ® ØµØ¯ÙˆØ± (Ø¬Ù„Ø§Ù„ÛŒ - yy/mm/dd)</label>
            <input id="startJ" class="jalali-input" placeholder="03/11/05">
            <input id="startDate" type="hidden">
          </div>
          <div id="singleEndWrap">
            <label>ØªØ§Ø±ÛŒØ® Ø³Ø±Ø±Ø³ÛŒØ¯ (Ø¬Ù„Ø§Ù„ÛŒ - yy/mm/dd)</label>
            <input id="endJ" class="jalali-input" placeholder="03/12/05">
            <input id="endDate" type="hidden">
          </div>
        </div>

        <div id="singleExtra">
          <div class="row">
            <div>
              <label>Ø´Ù†Ø§Ø³Ù‡ Û±Û¶ Ø±Ù‚Ù…ÛŒ Ú†Ú©</label>
              <input id="singleCode" class="code-16" maxlength="16" inputmode="numeric" placeholder="ÙÙ‚Ø· Ø¹Ø¯Ø¯">
            </div>
          </div>
        </div>

        <div id="monthlyExtra" class="hidden">
          <div class="row">
            <div>
              <label>ØªØ¹Ø¯Ø§Ø¯ Ù…Ø§Ù‡</label>
              <input id="months" class="numeric-int" inputmode="numeric" placeholder="Ù…Ø«Ù„Ø§Ù‹: 5">
            </div>
            <div>
              <label>ØªØ¹Ø¯Ø§Ø¯ Ù…Ø§Ù‡ ØªÙ†ÙØ³</label>
              <input id="graceMonths" class="numeric-int" inputmode="numeric" value="1">
            </div>
          </div>
          <div class="sep"></div>
          <div class="tiny">Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ù…Ø§Ù‡ØŒ ØªØ§Ø±ÛŒØ® Ø³Ø±Ø±Ø³ÛŒØ¯ Ø¬Ù„Ø§Ù„ÛŒ Ùˆ Ø´Ù†Ø§Ø³Ù‡ Ú†Ú© Ø±Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒ ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ù†ÛŒ.</div>
          <div id="monthlyList" style="margin-top:6px;"></div>
        </div>

        <div class="sep"></div>
        <button onclick="previewCalc()">Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø³ÙˆØ¯</button>
        <div id="previewBox" class="tiny" style="margin-top:4px;"></div>

        <div style="margin-top:10px;">
          <button class="primary" onclick="saveCheck()">Ø°Ø®ÛŒØ±Ù‡ Ú†Ú©</button>
        </div>
      </div>
    </section>

    <!-- Ù…Ø¯ÛŒØ±ÛŒØª Ú†Ú©â€ŒÙ‡Ø§ -->
    <section id="view-manage" class="hidden">
      <h2>Ù…Ø¯ÛŒØ±ÛŒØª Ú†Ú©â€ŒÙ‡Ø§</h2>
      <div class="subtitle">Ø¬Ø³ØªØ¬ÙˆØŒ ÙÛŒÙ„ØªØ±ØŒ Ù¾ÙˆØ´Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ùˆ Ø¢Ø±Ø´ÛŒÙˆ Ú†Ú©â€ŒÙ‡Ø§.</div>

      <div class="card">
        <label>Ø¬Ø³ØªØ¬Ùˆ</label>
        <div class="search-wrap">
          <div style="position:relative; flex:1;">
            <input id="searchInput" class="search-input" placeholder="Ø®Ø±ÛŒØ¯Ø§Ø±ØŒ Ù…Ø¹Ø±ÙØŒ Ø´Ù†Ø§Ø³Ù‡ØŒ ØªÙ„ÙÙ†ØŒ Ø¨Ø±Ú†Ø³Ø¨">
            <span class="search-icon">ğŸ”</span>
          </div>
          <button class="search-clear" onclick="clearSearch()">Ø­Ø°Ù</button>
        </div>
      </div>

      <div class="card">
        <div class="row">
          <div>
            <label>Ø­Ø§Ù„Øª Ù†Ù…Ø§ÛŒØ´</label>
            <select id="manageMode" onchange="renderManage()">
              <option value="folders">Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…Ø¹Ø±Ùâ€ŒÙ‡Ø§</option>
              <option value="all">Ù„ÛŒØ³Øª Ù‡Ù…Ù‡ Ú†Ú©â€ŒÙ‡Ø§</option>
            </select>
          </div>
          <div>
            <label>ÙÛŒÙ„ØªØ± ÙˆØ¶Ø¹ÛŒØª</label>
            <select id="statusFilter" onchange="renderManage()">
              <option value="any">Ù‡Ù…Ù‡</option>
              <option value="unpaid">ÙØ¹Ø§Ù„ / Ù†Ø²Ø¯ÛŒÚ© / Ù…Ø¹ÙˆÙ‚</option>
              <option value="paid">Ù¾Ø±Ø¯Ø§Ø®Øªâ€ŒØ´Ø¯Ù‡</option>
            </select>
          </div>
        </div>
        <div class="row" style="margin-top:4px;">
          <div>
            <label>Ø§Ø² ØªØ§Ø±ÛŒØ® Ø³Ø±Ø±Ø³ÛŒØ¯ (Ø¬Ù„Ø§Ù„ÛŒ - yy/mm/dd)</label>
            <input id="fromJ" class="jalali-input" placeholder="03/01/01">
            <input id="fromDate" type="hidden">
          </div>
          <div>
            <label>ØªØ§ ØªØ§Ø±ÛŒØ® Ø³Ø±Ø±Ø³ÛŒØ¯ (Ø¬Ù„Ø§Ù„ÛŒ - yy/mm/dd)</label>
            <input id="toJ" class="jalali-input" placeholder="03/12/29">
            <input id="toDate" type="hidden">
          </div>
        </div>
        <div style="margin-top:6px;">
          <button class="small" onclick="clearFilters()">Ø­Ø°Ù ÙÛŒÙ„ØªØ±Ù‡Ø§</button>
        </div>
      </div>

      <div class="card">
        <h3>Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø¹Ø±Ù Ø¬Ø¯ÛŒØ¯</h3>
        <div class="row">
          <div><input id="newReferrer" placeholder="Ù†Ø§Ù… Ù…Ø¹Ø±Ù (Ù…Ø«Ù„Ø§Ù‹: Ø¹Ù„ÛŒ Ø±Ø¶Ø§ÛŒÛŒ)"></div>
          <div><button class="primary" onclick="addReferrer()">Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø¹Ø±Ù</button></div>
        </div>
      </div>

      <div id="manageList"></div>
    </section>

    <!-- ØªÙ†Ø¸ÛŒÙ…Ø§Øª -->
    <section id="view-settings" class="hidden">
      <h2>ØªÙ†Ø¸ÛŒÙ…Ø§Øª</h2>
      <div class="subtitle">Ù¾Ø´ØªÛŒØ¨Ø§Ù†ØŒ Ø­Ø°Ù Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ØŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡.</div>

      <div class="card">
        <h3>Ù¾Ø´ØªÛŒØ¨Ø§Ù†â€ŒÚ¯ÛŒØ±ÛŒ</h3>
        <div class="row">
          <div><button onclick="exportCSV()">Ø®Ø±ÙˆØ¬ÛŒ CSV</button></div>
          <div><button onclick="exportJSON()">Ù¾Ø´ØªÛŒØ¨Ø§Ù† JSON</button></div>
        </div>
      </div>

      <div class="card">
        <h3>Ø­Ø°Ù Ú©Ø§Ù…Ù„ Ù‡Ù…Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§</h3>
        <div class="tiny">Ù‡Ù…Ù‡ Ù…Ø¹Ø±Ùâ€ŒÙ‡Ø§ Ùˆ Ú†Ú©â€ŒÙ‡Ø§ Ù¾Ø§Ú© Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.</div>
        <div style="margin-top:6px;">
          <button class="danger" onclick="wipeData()">Ø­Ø°Ù Ù‡Ù…Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§</button>
        </div>
      </div>

      <div class="card">
        <h3>Ø¯Ø±Ø¨Ø§Ø±Ù‡ Check Master</h3>
        <div class="tiny">
          <div>Ù…Ø¯ÛŒØ±ÛŒØª Ú†Ú© Ùˆ Ø³ÙˆØ¯ Ø±ÙˆØ²Ø§Ù†Ù‡/Ù…Ø§Ù‡Ø§Ù†Ù‡ Ø¨Ø§ ØªØ§Ø±ÛŒØ® Ø¬Ù„Ø§Ù„ÛŒ.</div>
          <div>Developer: <b>Soroush</b></div>
          <div>Ù†Ø³Ø®Ù‡: 4.0 (Jalali + Profit + PWA)</div>
        </div>
      </div>
    </section>
  </main>

  <!-- ØªØ¨â€ŒÙ‡Ø§ -->
  <nav class="tabs">
    <div class="tab active" data-target="view-report" onclick="switchTab(event)">
      <div class="tab-icon">ğŸ“Š</div>
      <div>Ú¯Ø²Ø§Ø±Ø´</div>
    </div>
    <div class="tab" data-target="view-add" onclick="switchTab(event)">
      <div class="tab-icon">â•</div>
      <div>Ø§ÙØ²ÙˆØ¯Ù† Ú†Ú©</div>
    </div>
    <div class="tab" data-target="view-manage" onclick="switchTab(event)">
      <div class="tab-icon">ğŸ“‚</div>
      <div>Ù…Ø¯ÛŒØ±ÛŒØª</div>
    </div>
    <div class="tab" data-target="view-settings" onclick="switchTab(event)">
      <div class="tab-icon">âš™ï¸</div>
      <div>ØªÙ†Ø¸ÛŒÙ…Ø§Øª</div>
    </div>
  </nav>

  <!-- Ø¬Ø²Ø¦ÛŒØ§Øª Ú¯Ø²Ø§Ø±Ø´ -->
  <div id="detailBack" class="overlay" onclick="if(event.target.id==='detailBack') closeDetail()">
    <div class="overlay-card">
      <div class="overlay-header">
        <h3 id="detailTitle">Ø¬Ø²Ø¦ÛŒØ§Øª</h3>
        <button class="small" onclick="closeDetail()">Ø¨Ø³ØªÙ†</button>
      </div>
      <div id="detailBody" class="overlay-body"></div>
    </div>
  </div>

  <!-- ÙˆÛŒØ±Ø§ÛŒØ´ / ØªÙ…Ø¯ÛŒØ¯ Ú†Ú© -->
  <div id="editBack" class="overlay" onclick="if(event.target.id==='editBack') closeEdit()">
    <div class="overlay-card">
      <div class="overlay-header">
        <h3>ÙˆÛŒØ±Ø§ÛŒØ´ / ØªÙ…Ø¯ÛŒØ¯ Ú†Ú©</h3>
        <button class="small" onclick="closeEdit()">Ø¨Ø³ØªÙ†</button>
      </div>
      <div class="overlay-body">
        <input type="hidden" id="editId">
        <div class="row">
          <div>
            <label>Ù†Ø§Ù… Ø®Ø±ÛŒØ¯Ø§Ø±</label>
            <input id="editBuyer">
          </div>
          <div>
            <label>Ù…Ø¹Ø±Ù</label>
            <select id="editRef"></select>
          </div>
        </div>
        <div class="row">
          <div>
            <label>Ù†ÙˆØ¹ Ú†Ú©</label>
            <input id="editType" disabled>
          </div>
          <div>
            <label>Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ† (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label>
            <input id="editPhone" class="phone-input">
          </div>
        </div>
        <div class="row">
          <div>
            <label>Ø´Ù†Ø§Ø³Ù‡ Û±Û¶ Ø±Ù‚Ù…ÛŒ</label>
            <input id="editCode" class="code-16" maxlength="16" inputmode="numeric">
          </div>
          <div>
            <label>Ø¨Ø±Ú†Ø³Ø¨</label>
            <input id="editLabel" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø¨Ø§Ø²Ø§Ø±ØŒ Ø·Ù„Ø§ØŒ ...">
          </div>
        </div>
        <div>
          <label>ÛŒØ§Ø¯Ø¯Ø§Ø´Øª</label>
          <textarea id="editNote" placeholder="ØªÙˆØ¶ÛŒØ­ Ú©ÙˆØªØ§Ù‡"></textarea>
        </div>
        <div class="row">
          <div>
            <label>Ù…Ø¨Ù„Øº Ú†Ú© (Ù†Ù…Ø§ÛŒØ´ÛŒ)</label>
            <input id="editAmount" class="money-input" data-money="1">
          </div>
          <div>
            <label>Ø¯Ø±ØµØ¯ Ø³ÙˆØ¯ Ù…Ø§Ù‡Ø§Ù†Ù‡ (%)</label>
            <input id="editRate" class="numeric-dec" inputmode="decimal">
          </div>
        </div>
        <div class="row">
          <div>
            <label>ØªØ§Ø±ÛŒØ® ØµØ¯ÙˆØ± (Ø¬Ù„Ø§Ù„ÛŒ)</label>
            <input id="editStartJ" class="jalali-input">
            <input id="editStart" type="hidden">
          </div>
          <div>
            <label>ØªØ§Ø±ÛŒØ® Ø³Ø±Ø±Ø³ÛŒØ¯ (Ø¬Ù„Ø§Ù„ÛŒ)</label>
            <input id="editEndJ" class="jalali-input">
            <input id="editEnd" type="hidden">
          </div>
        </div>
        <div class="row">
          <div>
            <label>ÙˆØ¶Ø¹ÛŒØª</label>
            <select id="editStatus">
              <option value="unpaid">ÙØ¹Ø§Ù„</option>
              <option value="paid">Ù¾Ø±Ø¯Ø§Ø®Øªâ€ŒØ´Ø¯Ù‡</option>
            </select>
          </div>
          <div>
            <label>Ø³ÙˆØ¯ Ú©Ù„ Ø§ÛŒÙ† Ú†Ú© (Ø§ØµÙ„Ã—Ù†Ø±Ø®Ã—Ø±ÙˆØ²/Û³Û° + ØªÙ…Ø¯ÛŒØ¯)</label>
            <input id="editProfitDisplay" disabled>
          </div>
        </div>
        <div class="tiny" style="margin-top:4px;">
          Ø³ÙˆØ¯ Ù‡Ù…ÛŒØ´Ù‡ Ø§Ø² Ø±ÙˆÛŒ <b>Ø§ØµÙ„ Ú†Ú©</b> Ùˆ ØªØ¹Ø¯Ø§Ø¯ Ø±ÙˆØ²Ù‡Ø§ Ùˆ Ø¯Ø±ØµØ¯ Ù…Ø§Ù‡Ø§Ù†Ù‡ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
          Ù…Ø¨Ù„Øº Ú†Ú© ÙÙ‚Ø· Ù†Ù…Ø§ÛŒØ´ Ø§Ø³Øª.
        </div>
        <div class="sep"></div>
        <div class="row">
          <div><button class="primary" onclick="applyEdit()">Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</button></div>
          <div><button onclick="extendCheck()">ØªÙ…Ø¯ÛŒØ¯ Ø¨Ø§ ØªØ§Ø±ÛŒØ® Ø¬Ø¯ÛŒØ¯</button></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø§ØµÙ„ÛŒ -->
  <script src="main.js"></script>
</body>
</html>
